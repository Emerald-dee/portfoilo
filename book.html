<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width,initial-scale=1" name="viewport"/>
    <link rel="dns-prefetch" href="//www.wattpad.com">
    <link rel="preconnect" href="https://www.wattpad.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet"
          href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Poppins:wght@400;600&display=swap">
    <link rel="preload" as="image" href="book-cover.jpg">
    <link rel="preload" as="image" href="spiralCursor.png">
    <title>The Book Realm — Jedidiah Ajisafe</title>
    <script>
        if (history.scrollRestoration) {
            history.scrollRestoration = 'manual';
        }
        window.scrollTo(0, 0);
    </script>
    <style>
        :root {
            --deep-purple: #0b0510;
            --mid-purple: #1a0f1f;
            --dark-red: #7a0000;
            --muted-gold: #C6A662;
            --paper: #0f0c0d;
            --text: #a8a8a8;
            --soft-shadow: rgba(0, 0, 0, 0.7);
            --ease: cubic-bezier(.22, .9, .3, 1);
        }

        .book-cover-container {
            margin: 32px auto 48px;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1200px;
            opacity: 0;
            transform: scale(0.95);
            animation: coverEnter 1200ms var(--ease) 400ms forwards;
        }

        @keyframes coverEnter {
            from {
                opacity: 0;
                transform: scale(0.95) translateY(20px);
                filter: blur(5px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
                filter: blur(0);
            }
        }

        /* The actual image styling */
        .book-cover-image {
            display: block;
            width: 100%;
            max-width: 320px;
            height: auto;
            border-radius: 8px;
            border: 1px solid rgba(198, 166, 98, 0.15);
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.8),
            0 0 20px rgba(198, 166, 98, 0.1),
            0 0 45px rgba(122, 0, 0, 0.1);
            transition: transform 400ms var(--ease), box-shadow 400ms var(--ease);
             will-change: transform, box-shadow;
        }

        .book-cover-image:hover {
            transform: translateY(-10px) rotateX(3deg) scale(1.02);
            box-shadow: 0 40px 60px -15px rgba(0, 0, 0, 0.85),
            0 0 30px rgba(198, 166, 98, 0.2),
            0 0 60px rgba(122, 0, 0, 0.15);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            cursor: none !important;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
            background: radial-gradient(1200px 600px at 10% 10%, rgba(122, 0, 0, 0.06), transparent 8%),
            linear-gradient(180deg, var(--deep-purple) 0%, #040203 70%);
            color: var(--text);
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
            line-height: 1.6;
            padding-bottom: 60px;
            /* The body is now just the static canvas */
        }

        @keyframes pageEnter {
            from {
                opacity: 0;
                transform: scale(1.02);
                filter: blur(6px);
            }
            to {
                opacity: 1;
                transform: scale(1);
                filter: blur(0);
            }
        }

        .container {
            max-width: 1150px;
            margin: 0 auto;
            padding: 36px 22px 80px;
            /* The container starts invisible... */
            opacity: 1;
            /* ...and fades in only after the eyebrow intro is underway */
            animation: pageEnter 900ms var(--ease) 2500ms forwards;
            will-change: opacity, transform, filter;
        }

        header {
            text-align: center;
            padding: 56px 0 32px;
            /*position: relative;*/
            overflow: visible;
            margin-bottom: 28px;
            isolation: isolate;
        }

        header::after {
            content: "";
            position: absolute;
            left: 50%;
            top: 8%;
            width: 1100px;
            height: 420px;
            transform: translateX(-50%);
            background: radial-gradient(circle at 40% 20%, rgba(122, 0, 0, 0.06), transparent 10%),
            radial-gradient(circle at 60% 80%, rgba(198, 166, 98, 0.04), transparent 8%);
            filter: blur(60px);
            pointer-events: none;
            mix-blend-mode: screen;
            opacity: 0.9;
        }

        /* ================== START: REPLACE CSS HERE ================== */

        .eyebrow {
            display: inline-block;
            padding: 8px 14px;
            border-radius: 999px;
            border: 1px solid rgba(198, 166, 98, 0.09);
            color: var(--text);
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), transparent);
            font-weight: 600;
            letter-spacing: 1px;

            /* Set initial state for the animation */
            opacity: 0;
            position: relative; /* Needed for z-index to work */

            /* Apply our new epic intro animation */
            animation: abyssIntro 3.5s var(--ease) 200ms forwards;
            will-change: transform, opacity, filter;
        }

        .book-cover-container {
            margin: 32px auto 48px;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1200px;
            opacity: 0;
            transform: scale(0.95);
            animation: coverEnter 1200ms var(--ease) 2500ms forwards;
        }

        h1 {
            font-family: "Playfair Display", serif;
            font-weight: 600;
            font-size: 2.6rem;
            color: var(--muted-gold);
            letter-spacing: 2px;
            text-shadow: 0 6px 30px rgba(0, 0, 0, 0.65);
            transform: translateY(0);
            opacity: 0;
            animation: titleGlow 1400ms var(--ease) 2700ms forwards;
        }

        @keyframes titleGlow {
            0% {
                opacity: 0;
                transform: translateY(26px) scale(0.995);
                filter: blur(6px);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
                filter: blur(0);
            }
        }

        header p.lead {
            margin-top: 12px;
            color: var(--text);
            opacity: 0.96;
        }

        /* --- Navigation Bar Logic --- */
        nav {
            display: flex;
            gap: 14px;
            justify-content: center;
            background: rgba(10, 8, 12, 0.45);
            padding: 8px 16px;
            border-radius: 999px;
            border: 1px solid rgba(198, 166, 98, 0.06);
            backdrop-filter: blur(6px);
            width: fit-content;
            justify-self: center;
            /*transform: translateX(-50%);*/
            transition: all 300ms var(--ease);
             will-change: transform, box-shadow, border;
        }


        nav a {
            color: var(--muted-gold);
            text-decoration: none;
            font-weight: 600;
            letter-spacing: 1px;
            padding: 8px 12px;
            border-radius: 999px;
            text-transform: uppercase;
            font-size: 0.82rem;
            transition: all 220ms var(--ease);
        }

        nav a:hover {
            color: var(--text);
            background: linear-gradient(90deg, rgba(122, 0, 0, 0.12), rgba(198, 166, 98, 0.06));
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.6);
        }

        .nav-wrapper {
            height: 56px;
            z-index: 9000;
            justify-items: center;
        }

        .book-wrapper {
            display: grid;
            grid-template-columns: 1fr minmax(420px, 520px);
            gap: 36px;
            align-items: start;
            max-width: 1200px;
            margin: 28px auto 80px;
            padding: 0 16px;
        }

        .excerpt {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.01), rgba(255, 255, 255, 0.00));
            border-radius: 14px;
            padding: 28px;
            border: 1px solid rgba(198, 166, 98, 0.05);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
            transform: translateY(12px);
            transition: transform 480ms var(--ease), box-shadow 480ms var(--ease);
        }

        .excerpt:hover {
            transform: translateY(0);
            box-shadow: 0 30px 90px rgba(0, 0, 0, 0.7);
        }

        .excerpt h2 {
            font-family: "Playfair Display", serif;
            color: var(--muted-gold);
            margin-bottom: 12px;
        }

        .excerpt p {
            color: var(--text);
            font-size: 1.03rem;
            text-align: justify;
            line-height: 1.8;
        }

        .book {
            width: 100%;
            max-width: 560px;
            margin: 0 auto;
            position: relative;
            perspective: 1600px;
        }

        .book-frame {
            background: linear-gradient(180deg, rgba(12, 6, 10, 0.9), rgba(22, 8, 10, 0.95));
            border-radius: 18px;
            padding: 20px;
            border: 1px solid rgba(198, 166, 98, 0.08);
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.7);
            transform-style: preserve-3d;
        }

        .book-inner {
            display: flex;
            gap: 18px;
            background: linear-gradient(180deg, #0f0d10, #0b090b);
            padding: 18px;
            border-radius: 12px;
            border: 1px solid rgba(198, 166, 98, 0.04);
        }

        .page {
            flex: 1;
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.01), rgba(255, 255, 255, 0.00));
            border-radius: 8px;
            padding: 18px;
            position: relative;
            box-shadow: inset 0 6px 18px rgba(0, 0, 0, 0.6);
            min-height: 320px;
        }

        .page.left {
            border-right: 1px solid rgba(198, 166, 98, 0.03);
        }

        .page.left .title {
            color: var(--muted-gold);
            font-family: "Playfair Display", serif;
            margin-bottom: 12px;
        }

        .page.left p {
            color: var(--text);
            font-size: 0.98rem;
            line-height: 1.7;
        }

        .page.right {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .video-wrap {
            width: 100%;
            background: linear-gradient(180deg, #0c0a0b, #0d0707);
            border-radius: 8px;
            padding: 12px;
            border: 2px solid rgba(198, 166, 98, 0.07);
            box-shadow: 0 18px 50px rgba(0, 0, 0, 0.7), inset 0 6px 16px rgba(0, 0, 0, 0.5);
            transition: transform 650ms var(--ease), box-shadow 650ms var(--ease);
        }

        .video-wrap:hover {
            transform: translateY(-6px);
            box-shadow: 0 30px 90px rgba(0, 0, 0, 0.72), 0 0 40px rgba(198, 166, 98, 0.04);
        }

        .video-wrap video {
            display: block;
            width: 100%;
            border-radius: 6px;
            background: #000;
            outline: none;
            border: 1px solid rgba(0, 0, 0, 0.5);
            cursor: auto !important; /* FIX: allow native cursor here */
        }

        footer {
            margin-top: 60px;
            background: linear-gradient(180deg, transparent, rgba(0, 0, 0, 0.2));
            text-align: center;
            color: rgba(198, 166, 98, 0.9);
            padding: 32px 12px;
            border-top: 1px solid rgba(122, 0, 0, 0.06);
            box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.02);
            font-size: 0.95rem;
        }

        .cursor-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .cursor-head {
            position: absolute;
            width: 44px;
            height: 44px;
            background: url('spiralCursor.png') center/contain no-repeat;
            mix-blend-mode: screen;
            will-change: transform;
            transform: translate(-50%, -50%);
        }

        .trail-dot {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: radial-gradient(circle at 30% 30%, rgba(198, 166, 98, 0.95), rgba(122, 0, 0, 0.9));
            box-shadow: 0 0 12px rgba(198, 166, 98, 0.6);
            pointer-events: none;
            will-change: transform, opacity;
            transform: translate(-50%, -50%);
        }

        /* --- Book Timeline Section --- */

        .timeline-section {
            position: relative;
            padding: 100px 0;
            overflow: hidden;
        }

        .timeline-section::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            height: 60%;
            background: radial-gradient(ellipse at center, rgba(122, 0, 0, 0.08), transparent 70%);
            filter: blur(80px);
            z-index: -1;
        }

        .timeline-nodes-wrapper {
            position: relative;
        }

        .timeline-spine {
            position: absolute;
            top: 0;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            background: linear-gradient(to bottom, transparent, var(--muted-gold) 10%, var(--muted-gold) 90%, transparent);
            opacity: 0.15;
            z-index: 1;
        }

        /* --- Timeline Nodes --- */

        .timeline-node {
            position: relative;
            width: 50%;
            padding: 20px 60px;
            opacity: 0;
            transform: translateY(50px);
            transition: opacity 600ms var(--ease), transform 600ms var(--ease);
            z-index: 2;
        }

        .timeline-node.is-visible {
            opacity: 1;
            transform: translateY(0);
        }

        .timeline-node:nth-child(odd) {
            left: 0;
            text-align: right;
        }

        .timeline-node:nth-child(even) {
            left: 50%;
            text-align: left;
        }

        .timeline-sigil {
            content: '';
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--muted-gold);
            border: 3px solid var(--deep-purple);
            box-shadow: 0 0 15px 3px rgba(198, 166, 98, 0.3);
            transition: transform 300ms var(--ease), box-shadow 300ms var(--ease);
            z-index: 3;
        }

        .timeline-node:nth-child(odd) .timeline-sigil {
            right: -8px;
        }

        .timeline-node:nth-child(even) .timeline-sigil {
            left: -8px;
        }

        .timeline-content h3 {
            font-family: "Playfair Display", serif;
            color: var(--muted-gold);
            font-size: 1.5rem;
            margin-bottom: 8px;
        }

        .timeline-content p {
            color: var(--text);
            opacity: 0.8;
            font-style: italic;
        }

        .timeline-node:hover .timeline-sigil {
            transform: translateY(-50%) scale(1.2);
            box-shadow: 0 0 25px 8px rgba(198, 166, 98, 0.4);
        }

        .timeline-node:hover .timeline-content {
            opacity: 1;
        }

        @media (max-width: 900px) {
            .timeline-spine {
                left: 20px;
            }

            .timeline-node,
            .timeline-node:nth-child(even) {
                width: 100%;
                left: 0;
                padding-left: 60px;
                padding-right: 20px;
                text-align: left;
            }

            .timeline-node:nth-child(odd) .timeline-sigil,
            .timeline-node:nth-child(even) .timeline-sigil {
                left: 12px;
            }
        }

        .book-vision {
            text-align: center;
            padding: 80px 0; /* Adjusted padding */
            position: relative;
            border-top: 1px solid rgba(198, 166, 98, 0.08); /* Subtle separator */
        }

        .vision-title {
            font-family: 'Playfair Display', serif; /* Use established theme font */
            font-size: 2.2rem; /* Harmonized font size */
            color: var(--muted-gold); /* Use established theme color */
            letter-spacing: 1px;
            margin-bottom: 24px; /* Increased spacing */
            text-shadow: 0 4px 20px rgba(0, 0, 0, 0.5); /* Deeper, softer shadow */

            /* Unified animation */
            opacity: 0;
            transform: translateY(20px);
            animation: visionFadeIn 1.2s var(--ease) 0.2s forwards;
        }

        .vision-text {
            font-family: "Poppins", system-ui, sans-serif;
            font-size: 1.1rem;
            line-height: 1.8;
            max-width: 750px;
            margin: 0 auto;
            color: var(--text);
            opacity: 0;
            transform: translateY(20px);
            animation: visionFadeIn 1.2s var(--ease) 0.4s forwards;
        }

        .vision-highlight {
            display: block;
            margin-top: 2rem;
            font-style: italic;
            font-weight: 500;
            color: var(--muted-gold);
            text-shadow: 0 0 15px rgba(198, 166, 98, 0.4); /* Softer glow */
        }

        body.page-exiting {
            animation: pageExit 900ms var(--ease) forwards;
        }

        @keyframes abyssIntro {
            /* 1. START: Materialize in the center */
            0% {
                /* Move to the vertical center and scale up */
                transform: translateY(calc(50vh - 150%)) scale(4);
                opacity: 0;
                filter: blur(8px);
                /* Ensure it's on top of everything during the intro */
                z-index: 10000;
            }

            /* 2. HOLD: Command the screen */
            30%, 70% {
                transform: translateY(calc(50vh - 150%)) scale(4);
                opacity: 1;
                filter: blur(0);
                z-index: 10000;
            }

            /* 3. FINISH: Settle into its final place */
            100% {
                /* Return to its natural position and size */
                transform: translateY(0) scale(1);
                opacity: 1;
                filter: blur(0);
                /* Return to a normal z-index */
                z-index: 1;
            }
        }

        @keyframes pageExit {
            from {
                opacity: 1;
                transform: scale(1);
                filter: blur(0);
            }
            to {
                opacity: 0;
                transform: scale(0.98);
                filter: blur(6px);
            }
        }

        /* --- Scroll To Top Arrow --- */
        #scrollTop {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 40px;
            height: 40px;
            background: rgba(198, 166, 98, 0.1);
            color: var(--muted-gold); /* Corrected variable */
            border: 1px solid rgba(198, 166, 98, 0.2); /* Subtle border */
            border-radius: 50%;
            text-align: center;
            line-height: 40px;
            font-size: 1.5rem;
            opacity: 0;
            visibility: hidden;
            transform: translateY(20px);
            transition: all 0.4s var(--ease); /* Use theme easing */
            z-index: 9999; /* Ensure it's on top */

            /* --- THE FIX --- */
            cursor: pointer !important; /* This is the critical fix */
        }

        #scrollTop.show {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        #scrollTop:hover {
            background: var(--muted-gold);
            color: var(--deep-purple); /* Corrected variable */
            transform: scale(1.1); /* Add a subtle hover effect */
        }

        /* Unified animation keyframe that matches the site's aesthetic */
        @keyframes visionFadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
                filter: blur(4px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
                filter: blur(0);
            }
        }

        @media (max-width: 720px) {
            .cursor-container {
                display: none !important;
            }

            * {
                cursor: auto !important;
            }

            .book-wrapper {
                grid-template-columns:1fr;
                padding: 0 18px;
            }
        }
    </style>
</head>
<body>
<div class="cursor-container" id="cursorContainer">
    <div aria-hidden="true" class="cursor-head" id="cursorHead"></div>
</div>
<div class="container">
    <header>
        <div class="eyebrow">WELCOME TO THE ABYSS</div>
        <div class="book-cover-container">
            <img alt="Cover for Two Sides of Eternity" class="book-cover-image" src="book-cover.jpg">
        </div>
        <h1>Two Sides of Eternity</h1>
        <div class="nav-wrapper">
            <nav aria-label="breadcrumb">
                <a href="personal portfoilo.html">Home</a>
                <a href="https://www.wattpad.com/story/228358894-two-sides-of-eternity">Read</a>
            </nav>
            <p class="lead">Heroes and Villains are two sides of the same coin</p>
        </div>
    </header>
    <main class="book-wrapper" role="main">
        <article aria-labelledby="excerptTitle" class="excerpt">
            <h2 id="excerptTitle">Excerpt</h2>
            <p>Her gaze softened slightly. “Tell me then, heretics — after all this time, who do you think was the
                villain?”</p>
            <p>Alicia chuckled under her breath, her eyes closing briefly. “I was expecting that question.” When she
                looked up again, her eyes shone with quiet certainty.“Hero and villain,” she said softly, “are just two
                sides of eternity. The hero is always both.”</p>
            <p>Ariel laughed — a true, bright sound that filled the hall with a warmth too sharp to be comforting.
                “Perhaps that’s the truest heresy I’ve ever heard.” She turned, her wings flaring wide, the tips
                brushing against the ceiling beams as motes of gold rained down. “Then let this be our last meeting. I
                hope we never see each other again.”</p>
            <div style="margin-top:18px; color:var(--text); font-size:0.95rem;">
                <strong>Note:</strong> This animated excerpt is best experienced on desktop with headphones.
            </div>
        </article>

        <aside aria-labelledby="bookTitle" class="book">
            <div class="book-frame">
                <div class="book-inner">
                    <section class="page left">
                        <div class="title">Two Sides of Eternity</div>
                        <p style="margin-top:8px; color:var(--text);">
                            A dark fantasy where grief breathes, and hope defies the forbidden. Tell me—does darkness
                            dwell only in villains, or in us all?
                        </p>
                        <div class="book-info">Animated excerpt</div>
                    </section>
                    <section class="page right">
                        <div class="video-wrap">
                            <video controls id="bookVideo" playsinline poster="spiralCursor.png" preload="metadata">
                                <source src="Fallen_Angel_s_Tragic_Descent.mp4" type="video/mp4">
                                Sorry — your browser does not support embedded video.
                            </video>
                        </div>
                    </section>
                </div>
            </div>
        </aside>
    </main>
</div>
<section class="timeline-section" id="bookTimeline">
    <div class="container">
        <div class="timeline-spine"></div>
        <div class="timeline-nodes-wrapper">
            <div class="timeline-node">
                <div class="timeline-sigil"></div>
                <div class="timeline-content">
                    <h3>The Beginning — When Light Forgot.</h3>
                    <p>A fragment of grief that started it all.</p>
                </div>
            </div>
            <div class="timeline-node">
                <div class="timeline-sigil"></div>
                <div class="timeline-content">
                    <h3>The Forbidden Thesis.</h3>
                    <p>Where knowledge crossed into sacrilege.</p>
                </div>
            </div>
            <div class="timeline-node">
                <div class="timeline-sigil"></div>
                <div class="timeline-content">
                    <h3>The Abyss Opens.</h3>
                    <p>Hope’s final descent.</p>
                </div>
            </div>
            <div class="timeline-node">
                <div class="timeline-sigil"></div>
                <div class="timeline-content">
                    <h3>The Divine Lies.</h3>
                    <p>When truth turned holy.</p>
                </div>
            </div>
        </div>
    </div>
</section>
<section class="book-vision">
    <div class="container">
        <div class="vision-content">
            <h2 class="vision-title">The Vision</h2>
            <p class="vision-text">
                To blur the line between good and evil until both become mirrors.
                To remind the reader that villains are not born from darkness,
                but from light misunderstood.
                <span class="vision-highlight">Every monster was once a savior on the wrong side of the coin.</span>
            </p>
        </div>
    </div>
</section>
<footer>
    &copy; 2025 Jedidiah Ajisafe — Crafted with passion and intent.
    <button id="scrollTop" title="Scroll to Top">↑</button>
</footer>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const cursorContainer = document.getElementById('cursorContainer');
        const cursorHead = document.getElementById("cursorHead");
        window.scrollTo(0, 0);

        // --- Configuration ---
        const trailSize = 15;
        const trailSpeed = 0.2;

        const trailDots = [];

        // --- Mouse and Cursor Position State ---
        const pos = {x: window.innerWidth / 2, y: window.innerHeight / 2}; // Target position
        const mouse = pos//{x: pos.x, y: pos.y}; // Actual mouse position

        // Easing function for smooth movement
        const lerp = (a, b, n) => (1 - n) * a + n * b;

        // Initialize the trail
        function setupTrail() {
            for (let i = 0; i < trailSize; i++) {
                const dot = document.createElement("div");
                dot.className = "trail-dot";
                cursorContainer.appendChild(dot);

                trailDots.push({
                    el: dot,
                    x: pos.x,
                    y: pos.y,
                });
            }
        }

        // Start the animation loop
        function startAnimation() {
            // Use a single animation frame loop for all updates
            const animate = () => {
                // Smoothly move the main cursor's target position towards the mouse
                pos.x = lerp(pos.x, mouse.x, trailSpeed);
                pos.y = lerp(pos.y, mouse.y, trailSpeed);

                // The first dot follows the main cursor position
                trailDots[0].x = pos.x;
                trailDots[0].y = pos.y;
                trailDots[0].el.style.transform = `translate(${pos.x}px, ${pos.y}px)`;

                // Each subsequent dot follows the one in front of it
                for (let i = 1; i < trailSize; i++) {
                    const prevDot = trailDots[i - 1];
                    const currentDot = trailDots[i];

                    currentDot.x = lerp(currentDot.x, prevDot.x, trailSpeed);
                    currentDot.y = lerp(currentDot.y, prevDot.y, trailSpeed);

                    // Dynamically adjust scale and opacity for a natural fade-out
                    const scale = (trailSize - i) / trailSize;
                    currentDot.el.style.transform = `translate(${currentDot.x}px, ${currentDot.y}px) scale(${scale})`;
                    currentDot.el.style.opacity = scale;
                }

                // Move the visible cursor head to the smoothed position
                cursorHead.style.transform = `translate(${pos.x - 22}px, ${pos.y - 22}px)`;

                requestAnimationFrame(animate);
            };

            animate();
        }

        window.addEventListener("mousemove", (e) => {
            mouse.x = e.clientX + window.scrollX;
            mouse.y = e.clientY + window.scrollY;
        });

        document.addEventListener("mouseenter", () => cursorContainer.style.opacity = "1");
        document.addEventListener("mouseleave", () => cursorContainer.style.opacity = "0");

        const interactiveElements = document.querySelectorAll("video, .video-wrap, a");
        interactiveElements.forEach(el => {
            el.addEventListener("mouseenter", () => cursorHead.style.opacity = "0");
            el.addEventListener("mouseleave", () => cursorHead.style.opacity = "1");
        });

        setupTrail();
        startAnimation();

        const timelineNodes = document.querySelectorAll('.timeline-node');

        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.3
        };

        const observer = new IntersectionObserver((entries, observer) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('is-visible');
                    observer.unobserve(entry.target);
                }
            });
        }, observerOptions);
        timelineNodes.forEach(node => {
            observer.observe(node);
        });

// --- Premium Page Exit Transition Logic ---

        const exitLinks = document.querySelectorAll('a[href]:not([href^="#"])');

        exitLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                // 1. Prevent the browser from navigating instantly
                e.preventDefault();

                // 2. Get the destination URL
                const destination = link.href;

                // 3. Add the exiting class to the body to trigger the CSS animation
                document.body.classList.add('page-exiting');

                // 4. Wait for the animation to complete, then navigate
                setTimeout(() => {
                    window.location.href = destination;
                }, 900);
            });
        });

        window.addEventListener('pagehide', (e) => {
            document.body.classList.add('page-exiting');
        });

// --- Fix for Back/Forward Cache (bf-cache)
        window.addEventListener('pageshow', (e) => {
            if (e.persisted) {
                document.body.classList.remove('page-exiting');
            }
        });

// Listen for scroll events to run our function
        const scrollTopBtn = document.getElementById('scrollTop');
        window.addEventListener('scroll', () => {
            if (window.scrollY > 200) {
                scrollTopBtn.classList.add('show');
            } else {
                scrollTopBtn.classList.remove('show');
            }
        });

        scrollTopBtn.addEventListener('click', () => {
            window.scrollTo({top: 0, behavior: 'smooth'});
        });
        window.addEventListener('beforeunload', () => {
            // Create a temporary style element to override the cursor style
            const style = document.createElement('style');
            style.innerHTML = `* { cursor: auto !important; }`;
            style.id = 'cursor-failsafe';
            document.head.appendChild(style);
        });

// --- Fix for Back/Forward Cache (bf-cache) ---
        window.addEventListener('pageshow', (e) => {
            // This event fires whenever the page becomes visible, including back/forward
            if (e.persisted) {
                // 'e.persisted' is true ONLY when the page is restored from the bf-cache.

                // 1. Remove the exiting class to make the page visible again.
                document.body.classList.remove('page-exiting');

                // 2. Reset the custom cursor's opacity to visible.
                cursorHead.style.opacity = '1';

                // 3. THE DEFINITIVE FIX: Find and remove the temporary failsafe style tag
                //    to restore the "cursor: none" rule and hide the native mouse.
                const failsafeStyle = document.getElementById('cursor-failsafe');
                if (failsafeStyle) {
                    failsafeStyle.remove();
                }
            }
        });
    });
</script>
</body>
</html>